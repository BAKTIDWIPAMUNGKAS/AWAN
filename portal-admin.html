<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Guru - Ponpes Raudhatul Ulum</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
        }

        .portal-container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 250px;
            background-color: #2c3e50;
            color: white;
            padding: 20px 0;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .sidebar .logo-section {
            text-align: center;
            padding: 20px;
            margin-bottom: 20px;
        }

        .sidebar .logo-icon-image {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: #1a5f3f;
        }

        .sidebar h3 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 18px;
            color: white;
            padding: 10px;
            background-color: rgba(26, 95, 63, 0.3);
            border-radius: 5px;
            margin: 0 10px 30px;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar ul li a {
            display: block;
            color: white;
            text-decoration: none;
            padding: 15px 20px;
            transition: background-color 0.3s;
            border-left: 5px solid transparent;
        }

        .sidebar ul li a:hover, .sidebar ul li a.active {
            background-color: #34495e;
            border-left: 5px solid #1a5f3f;
        }

        .sidebar ul li a i {
            margin-right: 10px;
        }

        .main-content {
            flex-grow: 1;
            margin-left: 250px;
            padding: 40px;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .dashboard-header {
            margin-bottom: 30px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dashboard-header h2 {
            color: #2c3e50;
            font-size: 32px;
        }

        .data-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }

        .data-section h3 {
            margin-bottom: 20px;
            color: #1a5f3f;
            font-size: 24px;
        }

        .profile-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
        }

        .profile-photo {
            text-align: center;
        }

        .profile-photo-circle {
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, #1a5f3f, #2d8659);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
        }

        .profile-name {
            color: #1a5f3f;
            font-size: 24px;
            margin-bottom: 5px;
        }

        .profile-role {
            color: #666;
            font-size: 16px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 14px;
        }

        .data-table th, .data-table td {
            border: 1px solid #eee;
            padding: 12px 15px;
            text-align: left;
        }

        .data-table th {
            background-color: #f8f8f8;
            color: #333;
            font-weight: 600;
        }

        .data-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .data-table tr:hover {
            background-color: #f0f0f0;
        }

        .data-table.profile-table td:first-child {
            font-weight: 600;
            width: 200px;
        }

        .data-table.profile-table tr {
            border-bottom: 1px solid #eee;
        }

        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .card-item {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 5px solid #1a5f3f;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .card-item:hover {
            transform: translateY(-5px);
        }

        .card-item i {
            font-size: 40px;
            color: #1a5f3f;
            opacity: 0.7;
        }

        .card-info h4 {
            font-size: 16px;
            color: #777;
            margin-bottom: 5px;
        }

        .card-info p {
            font-size: 28px;
            font-weight: 700;
            color: #333;
        }

        .btn-action {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 5px;
            font-size: 12px;
        }

        .btn-action.edit {
            background: #3498db;
        }

        .btn-new {
            background: #1a5f3f;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            display: inline-block;
            font-weight: 600;
            border: none;
            cursor: pointer;
        }

        .btn-new:hover {
            background: #2d8659;
        }

        .table-container {
            overflow-x: auto;
        }

        /* ===== TOGGLE MENU UNTUK PORTAL ADMIN ===== */
        .sidebar-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: #1a5f3f;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            z-index: 1100;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 5px;
            padding: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .sidebar-toggle span {
            display: block;
            width: 24px;
            height: 3px;
            background-color: white;
            border-radius: 3px;
            transition: all 0.3s ease;
        }

        .sidebar-toggle.active span:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }

        .sidebar-toggle.active span:nth-child(2) {
            opacity: 0;
            transform: translateX(-20px);
        }

        .sidebar-toggle.active span:nth-child(3) {
            transform: translateY(-8px) rotate(-45deg);
        }

        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 998;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .sidebar-overlay.active {
            display: block;
            opacity: 1;
        }

        @media (max-width: 768px) {
            .sidebar-toggle {
                display: flex;
            }

            .sidebar {
                position: fixed;
                left: -250px;
                width: 250px;
                height: 100vh;
                z-index: 999;
                transition: left 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            }

            .sidebar.active {
                left: 0;
            }

            .main-content {
                margin-left: 0;
                padding: 80px 20px 20px;
            }
        }

        body.sidebar-open {
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div class="portal-container">
        <aside class="sidebar">
            <div class="logo-section">
                <div class="logo-icon-image">
                    <i class="fas fa-graduation-cap"></i>
                </div>
            </div>
            <h3 id="portalTitle"><i class="fas fa-chalkboard-teacher"></i> Portal Guru</h3>
            <ul>
                <li><a href="#profil" onclick="showSection('profil')" class="active"><i class="fas fa-user"></i> Profil</a></li>
                <li><a href="#jadwal" onclick="showSection('jadwal')"><i class="fas fa-calendar"></i> Jadwal Mengajar</a></li>
                <li><a href="#kelas" onclick="showSection('kelas')"><i class="fas fa-users"></i> Daftar Kelas</a></li>
                <li><a href="#absensi" onclick="showSection('absensi')"><i class="fas fa-clipboard-check"></i> Absensi</a></li>
                <li><a href="#nilai" onclick="showSection('nilai')"><i class="fas fa-chart-line"></i> Input Nilai</a></li>
                <li><a href="#" onclick="handleLogout(event)" style="margin-top: 30px; background: #e74c3c;"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            </ul>
        </aside>

        <main class="main-content">
            <!-- SECTION PROFIL -->
            <section id="profil" class="content-section active">
                <div class="dashboard-header">
                    <h2><i class="fas fa-user"></i> Profil Guru</h2>
                </div>

                <div class="data-section">
                    <div class="profile-container">
                        <div class="profile-photo">
                            <div class="profile-photo-circle">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <h3 class="profile-name" id="profileName">Loading...</h3>
                            <p class="profile-role" id="profileRole">Loading...</p>
                        </div>
                        <div>
                            <h3 style="color: #1a5f3f; margin-bottom: 20px;">Data Pribadi</h3>
                            <table class="data-table profile-table">
                                <tr>
                                    <td>NIP</td>
                                    <td id="userNip">-</td>
                                </tr>
                                <tr>
                                    <td>Tempat, Tanggal Lahir</td>
                                    <td id="userTtl">-</td>
                                </tr>
                                <tr>
                                    <td>Pendidikan Terakhir</td>
                                    <td id="userPendidikan">-</td>
                                </tr>
                                <tr>
                                    <td>Mata Pelajaran</td>
                                    <td id="userMapel">-</td>
                                </tr>
                                <tr>
                                    <td>Wali Kelas</td>
                                    <td id="userWali">-</td>
                                </tr>
                                <tr>
                                    <td>No. HP</td>
                                    <td id="userHp">-</td>
                                </tr>
                                <tr>
                                    <td>Email</td>
                                    <td id="userEmail">-</td>
                                </tr>
                                <tr>
                                    <td>Alamat</td>
                                    <td id="userAlamat">-</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION JADWAL -->
            <section id="jadwal" class="content-section">
                <div class="dashboard-header">
                    <h2><i class="fas fa-calendar"></i> Jadwal Mengajar</h2>
                </div>

                <div class="data-section">
                    <h3>Semester Ganjil 2025/2026</h3>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Waktu</th>
                                    <th>Senin</th>
                                    <th>Selasa</th>
                                    <th>Rabu</th>
                                    <th>Kamis</th>
                                    <th>Jumat</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>07:00 - 08:30</strong></td>
                                    <td style="background: #e8f5e9; font-weight: 600;">Kelas 7A<br><small>Ruang 7A</small></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td><strong>08:30 - 10:00</strong></td>
                                    <td></td>
                                    <td style="background: #e8f5e9; font-weight: 600;">Kelas 7A<br><small>Ruang 7A</small></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td colspan="6" style="background: #f8f9fa; text-align: center;"><strong>Istirahat (10:00 - 10:15)</strong></td>
                                </tr>
                                <tr>
                                    <td><strong>10:15 - 11:45</strong></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td style="background: #fff3cd; font-weight: 600;">Kelas 8A<br><small>Ruang 8A</small></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td colspan="6" style="background: #f8f9fa; text-align: center;"><strong>Ishoma (11:45 - 13:00)</strong></td>
                                </tr>
                                <tr>
                                    <td><strong>13:00 - 14:30</strong></td>
                                    <td></td>
                                    <td style="background: #e3f2fd; font-weight: 600;">Kelas 7B<br><small>Ruang 7B</small></td>
                                    <td style="background: #fff3cd; font-weight: 600;">Kelas 8A<br><small>Ruang 8A</small></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td><strong>14:30 - 16:00</strong></td>
                                    <td></td>
                                    <td></td>
                                    <td style="background: #e3f2fd; font-weight: 600;">Kelas 7B<br><small>Ruang 7B</small></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <p style="margin-top: 15px; color: #666;"><strong>Total: 18 Jam Pelajaran per minggu</strong></p>
                </div>
            </section>

            <!-- SECTION KELAS -->
            <section id="kelas" class="content-section">
                <div class="dashboard-header">
                    <h2><i class="fas fa-users"></i> Daftar Kelas</h2>
                </div>

                <div class="dashboard-cards">
                    <div class="card-item" onclick="showKelasDetail('7A')" style="border-left-color: #27ae60;">
                        <div class="card-info">
                            <h4>Kelas 7A</h4>
                            <p>32 Siswa</p>
                            <small style="color: #666;">Wali Kelas</small>
                        </div>
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="card-item" onclick="showKelasDetail('7B')" style="border-left-color: #3498db;">
                        <div class="card-info">
                            <h4>Kelas 7B</h4>
                            <p>30 Siswa</p>
                            <small style="color: #666;">Matematika</small>
                        </div>
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="card-item" onclick="showKelasDetail('8A')" style="border-left-color: #f39c12;">
                        <div class="card-info">
                            <h4>Kelas 8A</h4>
                            <p>33 Siswa</p>
                            <small style="color: #666;">Matematika</small>
                        </div>
                        <i class="fas fa-users"></i>
                    </div>
                </div>

                <div id="kelasDetail" class="data-section" style="display: none;">
                    <h3 id="kelasDetailTitle">Detail Kelas</h3>
                    <div class="table-container">
                        <table class="data-table" id="kelasDetailTable">
                            <thead>
                                <tr>
                                    <th>No</th>
                                    <th>NISN</th>
                                    <th>Nama Siswa</th>
                                    <th>Jenis Kelamin</th>
                                    <th>No. HP</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="kelasDetailBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- SECTION ABSENSI -->
            <section id="absensi" class="content-section">
                <div class="dashboard-header">
                    <h2><i class="fas fa-clipboard-check"></i> Absensi Siswa</h2>
                </div>

                <div class="data-section">
                    <div style="margin-bottom: 20px; display: flex; gap: 15px; flex-wrap: wrap;">
                        <select id="kelasAbsensi" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;" onchange="loadAbsensi()">
                            <option value="">Pilih Kelas</option>
                            <option value="7A">Kelas 7A</option>
                            <option value="7B">Kelas 7B</option>
                            <option value="8A">Kelas 8A</option>
                        </select>
                        <input type="date" id="tanggalAbsensi" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;" value="">
                        <button class="btn-new" onclick="loadAbsensi()"><i class="fas fa-sync"></i> Muat Data</button>
                    </div>

                    <div id="absensiForm" style="display: none;">
                        <h3 id="absensiTitle"></h3>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>No</th>
                                        <th>NISN</th>
                                        <th>Nama Siswa</th>
                                        <th>Status Kehadiran</th>
                                        <th>Keterangan</th>
                                    </tr>
                                </thead>
                                <tbody id="absensiTableBody">
                                </tbody>
                            </table>
                        </div>
                        <button class="btn-new" style="margin-top: 20px;" onclick="saveAbsensi()"><i class="fas fa-save"></i> Simpan Absensi</button>
                    </div>
                </div>
            </section>

            <!-- SECTION NILAI -->
            <section id="nilai" class="content-section">
                <div class="dashboard-header">
                    <h2><i class="fas fa-chart-line"></i> Input Nilai Siswa</h2>
                </div>

                <div class="data-section">
                    <div style="margin-bottom: 20px; display: flex; gap: 15px; flex-wrap: wrap;">
                        <select id="kelasNilai" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                            <option value="">Pilih Kelas</option>
                            <option value="7A">Kelas 7A</option>
                            <option value="7B">Kelas 7B</option>
                            <option value="8A">Kelas 8A</option>
                        </select>
                        <select id="jenisNilai" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                            <option value="">Jenis Nilai</option>
                            <option value="UH1">Ulangan Harian 1</option>
                            <option value="UH2">Ulangan Harian 2</option>
                            <option value="UTS">Ujian Tengah Semester</option>
                            <option value="UAS">Ujian Akhir Semester</option>
                        </select>
                        <button class="btn-new" onclick="loadNilai()"><i class="fas fa-search"></i> Tampilkan</button>
                    </div>

                    <div id="nilaiForm" style="display: none;">
                        <h3 id="nilaiTitle"></h3>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>No</th>
                                        <th>NISN</th>
                                        <th>Nama Siswa</th>
                                        <th>Nilai</th>
                                        <th>Predikat</th>
                                    </tr>
                                </thead>
                                <tbody id="nilaiTableBody">
                                </tbody>
                            </table>
                        </div>
                        <button class="btn-new" style="margin-top: 20px;" onclick="saveNilai()"><i class="fas fa-save"></i> Simpan Nilai</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Data Siswa Simulasi
        const students = {
            '7A': [
                { no: 1, nisn: '007101', nama: 'Budi Santoso', jk: 'L', hp: '081234567801' },
                { no: 2, nisn: '007102', nama: 'Siti Aminah', jk: 'P', hp: '081234567802' },
                { no: 3, nisn: '007103', nama: 'Fahri Hidayat', jk: 'L', hp: '081234567803' },
                { no: 4, nisn: '007104', nama: 'Dewi Lestari', jk: 'P', hp: '081234567804' },
                { no: 5, nisn: '007105', nama: 'Ahmad Rizki', jk: 'L', hp: '081234567805' }
            ],
            '7B': [
                { no: 1, nisn: '007201', nama: 'Rizky Putra', jk: 'L', hp: '081234567811' },
                { no: 2, nisn: '007202', nama: 'Ayu Kartika', jk: 'P', hp: '081234567812' },
                { no: 3, nisn: '007203', nama: 'Dimas Prasetyo', jk: 'L', hp: '081234567813' },
                { no: 4, nisn: '007204', nama: 'Fitri Handayani', jk: 'P', hp: '081234567814' }
            ],
            '8A': [
                { no: 1, nisn: '008101', nama: 'Joko Susilo', jk: 'L', hp: '081234567821' },
                { no: 2, nisn: '008102', nama: 'Mega Wati', jk: 'P', hp: '081234567822' },
                { no: 3, nisn: '008103', nama: 'Bayu Aji', jk: 'L', hp: '081234567823' },
                { no: 4, nisn: '008104', nama: 'Rina Susanti', jk: 'P', hp: '081234567824' }
            ]
        };

        // Fungsi untuk mendapatkan data user yang sedang login
        function getLoggedInUser() {
            const userSession = sessionStorage.getItem('loggedInUser');
            if (!userSession) {
                alert('Anda harus login terlebih dahulu!');
                window.location.href = 'masuk.html';
                return null;
            }
            return JSON.parse(userSession);
        }

        // Fungsi untuk update profil user di halaman
        function updateUserProfile() {
            const user = getLoggedInUser();
            if (!user) return;

            document.getElementById('profileName').textContent = user.name;
            document.getElementById('profileRole').textContent = user.role;
            document.getElementById('userNip').textContent = user.nip || '-';
            document.getElementById('userTtl').textContent = user.ttl || '-';
            document.getElementById('userPendidikan').textContent = user.pendidikan || '-';
            document.getElementById('userMapel').textContent = user.mataPelajaran || '-';
            document.getElementById('userWali').textContent = user.wali || '-';
            document.getElementById('userHp').textContent = user.hp || '-';
            document.getElementById('userEmail').textContent = user.email || '-';
            document.getElementById('userAlamat').textContent = user.alamat || '-';

            const portalTitle = document.getElementById('portalTitle');
            if (user.role.toLowerCase().includes('guru')) {
                portalTitle.innerHTML = '<i class="fas fa-chalkboard-teacher"></i> Portal Guru';
            } else if (user.role.toLowerCase().includes('admin')) {
                portalTitle.innerHTML = '<i class="fas fa-user-shield"></i> Portal Admin';
            } else {
                portalTitle.innerHTML = '<i class="fas fa-user-cog"></i> Portal Staff';
            }
        }

        // Fungsi untuk navigasi antar section
        function showSection(sectionId) {
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => section.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');

            const links = document.querySelectorAll('.sidebar ul li a');
            links.forEach(link => link.classList.remove('active'));
            const activeLink = document.querySelector(`.sidebar ul li a[href="#${sectionId}"]`);
            if (activeLink) activeLink.classList.add('active');

            if (sectionId === 'absensi' && !document.getElementById('tanggalAbsensi').value) {
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('tanggalAbsensi').value = today;
            }
        }

        // Fungsi Tampilkan Detail Kelas
        function showKelasDetail(kelas) {
            const detailSection = document.getElementById('kelasDetail');
            const detailTitle = document.getElementById('kelasDetailTitle');
            const detailBody = document.getElementById('kelasDetailBody');

            detailTitle.textContent = `Detail Siswa Kelas ${kelas}`;
            detailBody.innerHTML = '';
            
            const dataSiswa = students[kelas] || [];
            
            dataSiswa.forEach(siswa => {
                const row = `
                    <tr>
                        <td>${siswa.no}</td>
                        <td>${siswa.nisn}</td>
                        <td>${siswa.nama}</td>
                        <td>${siswa.jk === 'L' ? 'Laki-laki' : 'Perempuan'}</td>
                        <td>${siswa.hp}</td>
                        <td>
                            <button class="btn-action edit" title="Lihat Profil"><i class="fas fa-id-card"></i></button>
                        </td>
                    </tr>
                `;
                detailBody.innerHTML += row;
            });
            
            detailSection.style.display = 'block';
        }

        // Fungsi Muat Data Absensi
        function loadAbsensi() {
            const kelas = document.getElementById('kelasAbsensi').value;
            const tanggal = document.getElementById('tanggalAbsensi').value;
            const absensiForm = document.getElementById('absensiForm');
            const absensiTitle = document.getElementById('absensiTitle');
            const absensiTableBody = document.getElementById('absensiTableBody');

            if (!kelas || !tanggal) {
                alert('Mohon pilih Kelas dan Tanggal.');
                absensiForm.style.display = 'none';
                return;
            }

            absensiTitle.textContent = `Absensi Kelas ${kelas} | Tanggal ${new Date(tanggal).toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' })}`;
            absensiTableBody.innerHTML = '';
            absensiForm.style.display = 'block';

            const dataSiswa = students[kelas] || [];
            
            dataSiswa.forEach((siswa, index) => {
                let status = 'Hadir';
                let keterangan = '-';
                if (index % 10 === 0) { status = 'Izin'; keterangan = 'Izin keluarga'; }
                else if (index % 15 === 0) { status = 'Sakit'; keterangan = 'Demam'; }
                
                const row = `
                    <tr>
                        <td>${siswa.no}</td>
                        <td>${siswa.nisn}</td>
                        <td>${siswa.nama}</td>
                        <td>
                            <select name="status_${siswa.nisn}" style="padding: 5px; border-radius: 4px;">
                                <option value="Hadir" ${status === 'Hadir' ? 'selected' : ''}>Hadir</option>
                                <option value="Izin" ${status === 'Izin' ? 'selected' : ''}>Izin</option>
                                <option value="Sakit" ${status === 'Sakit' ? 'selected' : ''}>Sakit</option>
                                <option value="Alpha" ${status === 'Alpha' ? 'selected' : ''}>Alpha</option>
                            </select>
                        </td>
                        <td><input type="text" name="keterangan_${siswa.nisn}" value="${keterangan}" style="padding: 5px; border: 1px solid #ddd; border-radius: 4px; width: 100%;"></td>
                    </tr>
                `;
                absensiTableBody.innerHTML += row;
            });
        }

        // Fungsi Simpan Absensi
        function saveAbsensi() {
            alert('Simulasi: Data Absensi berhasil disimpan!');
        }

        // Fungsi Muat Data Nilai
        function loadNilai() {
            const kelas = document.getElementById('kelasNilai').value;
            const jenis = document.getElementById('jenisNilai').value;
            const nilaiForm = document.getElementById('nilaiForm');
            const nilaiTitle = document.getElementById('nilaiTitle');
            const nilaiTableBody = document.getElementById('nilaiTableBody');

            if (!kelas || !jenis) {
                alert('Mohon pilih Kelas dan Jenis Nilai.');
                nilaiForm.style.display = 'none';
                return;
            }

            nilaiTitle.textContent = `Input Nilai ${jenis} | Kelas ${kelas} | Mapel Matematika`;
            nilaiTableBody.innerHTML = '';
            nilaiForm.style.display = 'block';

            const dataSiswa = students[kelas] || [];
            
            dataSiswa.forEach((siswa, index) => {
                const nilai = 75 + (index % 2) * 10 + Math.floor(Math.random() * 5);
                const predikat = nilai >= 85 ? 'A' : (nilai >= 75 ? 'B' : 'C');

                const row = `
                    <tr>
                        <td>${siswa.no}</td>
                        <td>${siswa.nisn}</td>
                        <td>${siswa.nama}</td>
                        <td><input type="number" name="nilai_${siswa.nisn}" value="${nilai}" min="0" max="100" style="padding: 5px; border: 1px solid #ddd; border-radius: 4px; width: 80px; text-align: center;"></td>
                        <td><span style="font-weight: 600; color: ${predikat === 'A' ? '#27ae60' : (predikat === 'B' ? '#3498db' : '#f39c12')}">${predikat}</span></td>
                    </tr>
                `;
                nilaiTableBody.innerHTML += row;
            });
        }

        // Fungsi Simpan Nilai
        function saveNilai() {
            alert('Simulasi: Data Nilai berhasil disimpan!');
        }

        // Fungsi untuk logout
        function handleLogout(event) {
            event.preventDefault();
            if (confirm('Apakah Anda yakin ingin logout?')) {
                sessionStorage.removeItem('loggedInUser');
                window.location.href = 'index.html';
            }
        }

        // Jalankan saat halaman dimuat
        document.addEventListener('DOMContentLoaded', () => {
            updateUserProfile();
        });

                // Inisialisasi Sidebar Toggle untuk Mobile
        (function() {
            // Buat tombol toggle
            const sidebarToggle = document.createElement('button');
            sidebarToggle.id = 'sidebarToggle';
            sidebarToggle.className = 'sidebar-toggle';
            sidebarToggle.innerHTML = `
                <span></span>
                <span></span>
                <span></span>
            `;
            document.body.appendChild(sidebarToggle);

            // Buat overlay
            const sidebarOverlay = document.createElement('div');
            sidebarOverlay.id = 'sidebarOverlay';
            sidebarOverlay.className = 'sidebar-overlay';
            document.body.appendChild(sidebarOverlay);

            const sidebar = document.querySelector('.sidebar');
            const body = document.body;

            // Toggle sidebar
            sidebarToggle.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                sidebarToggle.classList.toggle('active');
                sidebar.classList.toggle('active');
                sidebarOverlay.classList.toggle('active');
                body.classList.toggle('sidebar-open');
            });

            // Tutup sidebar saat overlay diklik
            sidebarOverlay.addEventListener('click', function() {
                sidebarToggle.classList.remove('active');
                sidebar.classList.remove('active');
                sidebarOverlay.classList.remove('active');
                body.classList.remove('sidebar-open');
            });

            // Tutup sidebar saat link diklik (mobile)
            const sidebarLinks = sidebar.querySelectorAll('ul li a');
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function() {
                    if (window.innerWidth <= 768) {
                        sidebarToggle.classList.remove('active');
                        sidebar.classList.remove('active');
                        sidebarOverlay.classList.remove('active');
                        body.classList.remove('sidebar-open');
                    }
                });
            });

            console.log('âœ… Sidebar toggle initialized!');
        })();
    </script>
</body>
</html>